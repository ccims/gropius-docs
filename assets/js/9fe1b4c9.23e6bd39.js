"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[73580],{346865:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>g,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var i=n(487462),a=(n(667294),n(603905));const s={id:"model_postgres_ActiveLogin_entity.ActiveLogin",title:"Class: ActiveLogin",sidebar_label:"ActiveLogin",custom_edit_url:null},r=void 0,l={unversionedId:"login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin",id:"login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin",title:"Class: ActiveLogin",description:"model/postgres/ActiveLogin.entity.ActiveLogin",source:"@site/docs/login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin.md",sourceDirName:"login-service-api/classes",slug:"/login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin",permalink:"/gropius-docs/login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"model_postgres_ActiveLogin_entity.ActiveLogin",title:"Class: ActiveLogin",sidebar_label:"ActiveLogin",custom_edit_url:null},sidebar:"apiSidebar",previous:{title:"ModelModule",permalink:"/gropius-docs/login-service-api/classes/model_model_module.ModelModule"},next:{title:"AuthClient",permalink:"/gropius-docs/login-service-api/classes/model_postgres_AuthClient_entity.AuthClient"}},o={},d=[{value:"Constructors",id:"constructors",level:2},{value:"constructor",id:"constructor",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Defined in",id:"defined-in",level:4},{value:"Properties",id:"properties",level:2},{value:"created",id:"created",level:3},{value:"Defined in",id:"defined-in-1",level:4},{value:"data",id:"data",level:3},{value:"Defined in",id:"defined-in-2",level:4},{value:"expires",id:"expires",level:3},{value:"Defined in",id:"defined-in-3",level:4},{value:"id",id:"id",level:3},{value:"Defined in",id:"defined-in-4",level:4},{value:"isValid",id:"isvalid",level:3},{value:"Defined in",id:"defined-in-5",level:4},{value:"loginInstanceFor",id:"logininstancefor",level:3},{value:"Defined in",id:"defined-in-6",level:4},{value:"nextExpectedRefreshTokenNumber",id:"nextexpectedrefreshtokennumber",level:3},{value:"Defined in",id:"defined-in-7",level:4},{value:"supportsSync",id:"supportssync",level:3},{value:"Defined in",id:"defined-in-8",level:4},{value:"usedStrategyInstance",id:"usedstrategyinstance",level:3},{value:"Defined in",id:"defined-in-9",level:4},{value:"LOGGED_IN_BUT_TOKEN_NOT_YET_RETRIVED",id:"logged_in_but_token_not_yet_retrived",level:3},{value:"Defined in",id:"defined-in-10",level:4},{value:"Methods",id:"methods",level:2},{value:"toJSON",id:"tojson",level:3},{value:"Returns",id:"returns",level:4},{value:"Defined in",id:"defined-in-11",level:4}],p={toc:d},c="wrapper";function g(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/modules/model_postgres_ActiveLogin_entity"},"model/postgres/ActiveLogin.entity"),".ActiveLogin"),(0,a.kt)("p",null,"Entity representing a single login event by one user using a specific strategy."),(0,a.kt)("p",null,"This object contains the data specific to this login event (e.g. tokens, ...).\nIt also saves the login time and other meta data needed to keep track of the login."),(0,a.kt)("p",null,"It can be invalidated by flag or expiration date"),(0,a.kt)("h2",{id:"constructors"},"Constructors"),(0,a.kt)("h3",{id:"constructor"},"constructor"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"new ActiveLogin"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"usedStrategyInstance"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"expires?"),")"),(0,a.kt)("h4",{id:"parameters"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"usedStrategyInstance")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-docs/login-service-api/classes/model_postgres_StrategyInstance_entity.StrategyInstance"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategyInstance")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"expires?")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"Date"))))),(0,a.kt)("h4",{id:"defined-in"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L18"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:18")),(0,a.kt)("h2",{id:"properties"},"Properties"),(0,a.kt)("h3",{id:"created"},"created"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"created"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Date")),(0,a.kt)("p",null,"The date+time at which the user logged in, creating this event.\nCan be the time the authentication request was submitted or the time the access token was retrieved"),(0,a.kt)("h4",{id:"defined-in-1"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L39"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:39")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"data"},"data"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"data"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"object")," = ",(0,a.kt)("inlineCode",{parentName:"p"},"{}")),(0,a.kt)("p",null,"Data which needs to be stored on a per-login basis (e.g. issued tokens from auth provider)"),(0,a.kt)("h4",{id:"defined-in-2"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L96"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:96")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"expires"},"expires"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"expires"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Date")),(0,a.kt)("p",null,"If not ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),", this login should be considered ",(0,a.kt)("em",{parentName:"p"},"invalid")," on any date+time AFTER this.\nThis is to ensure logout and time restrict registration etc."),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),", the login should not expire by date."),(0,a.kt)("h4",{id:"defined-in-3"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L48"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:48")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"id"},"id"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"id"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"string")),(0,a.kt)("p",null,"The unique ID of this active login"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"12345678-90ab-cdef-fedc-ab0987654321\n")),(0,a.kt)("h4",{id:"defined-in-4"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L32"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:32")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"isvalid"},"isValid"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"isValid"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"boolean")),(0,a.kt)("p",null,"Whether this login is valid to be used."),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," it should be considered ",(0,a.kt)("em",{parentName:"p"},"invalid")," (just like expired) and no new tokens issued for it."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"true\n")),(0,a.kt)("h4",{id:"defined-in-5"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L57"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:57")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"logininstancefor"},"loginInstanceFor"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"loginInstanceFor"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/classes/model_postgres_UserLoginData_entity.UserLoginData"},(0,a.kt)("inlineCode",{parentName:"a"},"UserLoginData")),">"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"loginData")," that represents the authentication of a user using one strategy.\nThis login event is one event instance of this authentication."),(0,a.kt)("p",null,"Should be set as soon as possible and should not be changed afterwards."),(0,a.kt)("h4",{id:"defined-in-6"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L118"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:118")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"nextexpectedrefreshtokennumber"},"nextExpectedRefreshTokenNumber"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"nextExpectedRefreshTokenNumber"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"number")),(0,a.kt)("p",null,"The numeric identifier of the last refresh token given out (the next one expected)."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"ONLY")," the token with this id should be accepted as refresh token for this login event.\nIf a ",(0,a.kt)("strong",{parentName:"p"},"valid")," token with an ",(0,a.kt)("strong",{parentName:"p"},"older")," id is used, this login event should be made invalid,\nas it is a reuse of the refresh token, which likely means it has been abused."),(0,a.kt)("p",null,"For a new instance this starts at LOGGED_IN_BUT_TOKEN_NOT_YET_RETRIVED=-1 and\ngets incremented once the first refresh token is created."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"0\n")),(0,a.kt)("h4",{id:"defined-in-7"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L89"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:89")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"supportssync"},"supportsSync"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"supportsSync"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"boolean")),(0,a.kt)("p",null,"Whether this login events data can be used for sync by the sync service.\nShould be ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," for logins created with REGISTER_SYNC function, ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," otherwise"),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", the data (e.g. the token) will be passed to tke sync service\nupon request for a IMSUser to be used to write onto that IMS in the users name"),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),", this login will be skipped in te search for a token."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"false\n")),(0,a.kt)("h4",{id:"defined-in-8"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L71"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:71")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"usedstrategyinstance"},"usedStrategyInstance"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"usedStrategyInstance"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/classes/model_postgres_StrategyInstance_entity.StrategyInstance"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategyInstance")),">"),(0,a.kt)("p",null,"The strategy instance that this login event used"),(0,a.kt)("p",null,"May not be null, must be set on creation."),(0,a.kt)("h4",{id:"defined-in-9"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L105"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:105")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"logged_in_but_token_not_yet_retrived"},"LOGGED","_","IN","_","BUT","_","TOKEN","_","NOT","_","YET","_","RETRIVED"),(0,a.kt)("p",null,"\u25aa ",(0,a.kt)("inlineCode",{parentName:"p"},"Static")," ",(0,a.kt)("strong",{parentName:"p"},"LOGGED","_","IN","_","BUT","_","TOKEN","_","NOT","_","YET","_","RETRIVED"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"number")," = ",(0,a.kt)("inlineCode",{parentName:"p"},"-1")),(0,a.kt)("h4",{id:"defined-in-10"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L16"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:16")),(0,a.kt)("h2",{id:"methods"},"Methods"),(0,a.kt)("h3",{id:"tojson"},"toJSON"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("strong",{parentName:"p"},"toJSON"),"(): ",(0,a.kt)("inlineCode",{parentName:"p"},"Object")),(0,a.kt)("h4",{id:"returns"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Object")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"created")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"Date"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"expores")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"Date"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"id")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"string"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"isValid")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"supportsSync")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"defined-in-11"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/ActiveLogin.entity.ts#L120"},"gropius-login-service/backend/src/model/postgres/ActiveLogin.entity.ts:120")))}g.isMDXComponent=!0}}]);