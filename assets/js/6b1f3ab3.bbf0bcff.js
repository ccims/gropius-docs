"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[61042],{98361:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var i=n(487462),a=(n(667294),n(603905));const s={id:"model_postgres_UserLoginData_entity.UserLoginData",title:"Class: UserLoginData",sidebar_label:"UserLoginData",custom_edit_url:null},r=void 0,o={unversionedId:"login-service-api/classes/model_postgres_UserLoginData_entity.UserLoginData",id:"login-service-api/classes/model_postgres_UserLoginData_entity.UserLoginData",title:"Class: UserLoginData",description:"model/postgres/UserLoginData.entity.UserLoginData",source:"@site/docs/login-service-api/classes/model_postgres_UserLoginData_entity.UserLoginData.md",sourceDirName:"login-service-api/classes",slug:"/login-service-api/classes/model_postgres_UserLoginData_entity.UserLoginData",permalink:"/gropius-docs/login-service-api/classes/model_postgres_UserLoginData_entity.UserLoginData",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"model_postgres_UserLoginData_entity.UserLoginData",title:"Class: UserLoginData",sidebar_label:"UserLoginData",custom_edit_url:null},sidebar:"apiSidebar",previous:{title:"UserLoginDataImsUser",permalink:"/gropius-docs/login-service-api/classes/model_postgres_UserLoginDataImsUser_entity.UserLoginDataImsUser"},next:{title:"ActiveLoginService",permalink:"/gropius-docs/login-service-api/classes/model_services_active_login_service.ActiveLoginService"}},l={},d=[{value:"Constructors",id:"constructors",level:2},{value:"constructor",id:"constructor",level:3},{value:"Properties",id:"properties",level:2},{value:"data",id:"data",level:3},{value:"Defined in",id:"defined-in",level:4},{value:"expires",id:"expires",level:3},{value:"Defined in",id:"defined-in-1",level:4},{value:"id",id:"id",level:3},{value:"Defined in",id:"defined-in-2",level:4},{value:"imsUsers",id:"imsusers",level:3},{value:"Defined in",id:"defined-in-3",level:4},{value:"loginsUsingThis",id:"loginsusingthis",level:3},{value:"Defined in",id:"defined-in-4",level:4},{value:"state",id:"state",level:3},{value:"Defined in",id:"defined-in-5",level:4},{value:"strategyInstance",id:"strategyinstance",level:3},{value:"Defined in",id:"defined-in-6",level:4},{value:"user",id:"user",level:3},{value:"Defined in",id:"defined-in-7",level:4},{value:"Methods",id:"methods",level:2},{value:"toJSON",id:"tojson",level:3},{value:"Returns",id:"returns",level:4},{value:"Defined in",id:"defined-in-8",level:4}],p={toc:d},g="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(g,(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/modules/model_postgres_UserLoginData_entity"},"model/postgres/UserLoginData.entity"),".UserLoginData"),(0,a.kt)("p",null,"Entity for representing the authenticatoin of a user using onme strategy instance"),(0,a.kt)("p",null,"It contains the data needed to identify a user if they tries to log in (e.g. username/id on 3rd party service).\nFor example password for username/password auth or the username for GitHub auth"),(0,a.kt)("h2",{id:"constructors"},"Constructors"),(0,a.kt)("h3",{id:"constructor"},"constructor"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"new UserLoginData"),"()"),(0,a.kt)("h2",{id:"properties"},"Properties"),(0,a.kt)("h3",{id:"data"},"data"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"data"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"any")),(0,a.kt)("p",null,"Data which needs to be stored for the user for every strategy he uses\n(e.g. username on the 3rd party platform, password for userpass)."),(0,a.kt)("p",null,"The exact data and structure stored depends on the strategy and their usage.\nIt will be set on initial registration of a authentication and not changed afterwards."),(0,a.kt)("h4",{id:"defined-in"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L77"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:77")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"expires"},"expires"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"expires"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Date")),(0,a.kt)("p",null,"If not ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),", this authentication should be considered ",(0,a.kt)("em",{parentName:"p"},"invalid")," on any date+time AFTER this.\nThis is to ensure created UserLoginData, that are not used for registration\nor linking in time, are not kept forever."),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),", the authentication should not expire by date."),(0,a.kt)("h4",{id:"defined-in-1"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L104"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:104")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"id"},"id"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"id"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"string")),(0,a.kt)("p",null,"The unique ID of this login data"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"12345678-90ab-cdef-fedc-ab0987654321\n")),(0,a.kt)("h4",{id:"defined-in-2"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L45"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:45")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"imsusers"},"imsUsers"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"imsUsers"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/classes/model_postgres_UserLoginDataImsUser_entity.UserLoginDataImsUser"},(0,a.kt)("inlineCode",{parentName:"a"},"UserLoginDataImsUser")),"[]",">"),(0,a.kt)("p",null,"All IMSUser instances in the backend that are represented by this authentication."),(0,a.kt)("p",null,"These are all users in an IMS that are represented by the strategy instance\nof this that match the needed data for this user.\nIf a request for an access token for any of these IMS users comes in,\nthe best token from all logins of this authenticaiton will be returned."),(0,a.kt)("p",null,"IMSUsers are added when:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"a sync service sends the information, that a IMSUser was created"),(0,a.kt)("li",{parentName:"ul"},"a user registeres (or logs in) using this authentication and new matching IMSUsers are found"),(0,a.kt)("li",{parentName:"ul"},"a user registeres (or logs in) using this authentication and\nan IMS is found on which no IMSUser for this authentication is found.")),(0,a.kt)("h4",{id:"defined-in-3"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L122"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:122")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"loginsusingthis"},"loginsUsingThis"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"loginsUsingThis"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin"},(0,a.kt)("inlineCode",{parentName:"a"},"ActiveLogin")),"[]",">"),(0,a.kt)("p",null,"A list of all login events that used this authentication."),(0,a.kt)("p",null,"Every time the user logs in or registers a new login instance will be saved."),(0,a.kt)("h4",{id:"defined-in-4"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L131"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:131")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"state"},"state"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"state"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/enums/model_postgres_UserLoginData_entity.LoginState"},(0,a.kt)("inlineCode",{parentName:"a"},"LoginState"))),(0,a.kt)("p",null,"The state this authentication is in."),(0,a.kt)("p",null,"Rules:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Only UserLoginData in state ",(0,a.kt)("a",{parentName:"li",href:"/gropius-docs/login-service-api/enums/model_postgres_UserLoginData_entity.LoginState#valid"},"LoginState.VALID")," may be used for login and retrieving an access token."),(0,a.kt)("li",{parentName:"ul"},"Only UserLoginData in state ",(0,a.kt)("a",{parentName:"li",href:"/gropius-docs/login-service-api/enums/model_postgres_UserLoginData_entity.LoginState#waiting_for_register"},"LoginState.WAITING_FOR_REGISTER")," may be used for registration or linking."),(0,a.kt)("li",{parentName:"ul"},"UserLoginData in state ",(0,a.kt)("a",{parentName:"li",href:"/gropius-docs/login-service-api/enums/model_postgres_UserLoginData_entity.LoginState#blocked"},"LoginState.BLOCKED")," cannot be used for anything")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'"VALID"\n')),(0,a.kt)("h4",{id:"defined-in-5"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L94"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:94")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"strategyinstance"},"strategyInstance"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"strategyInstance"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/classes/model_postgres_StrategyInstance_entity.StrategyInstance"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategyInstance")),">"),(0,a.kt)("p",null,"The strategy instance this authentication uses."),(0,a.kt)("p",null,"For example a UserLoginData containing a password would reference a strategy instance of type userpass"),(0,a.kt)("h4",{id:"defined-in-6"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L66"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:66")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"user"},"user"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"user"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("a",{parentName:"p",href:"/gropius-docs/login-service-api/classes/model_postgres_LoginUser_entity.LoginUser"},(0,a.kt)("inlineCode",{parentName:"a"},"LoginUser")),">"),(0,a.kt)("p",null,"The user that is represented by this authentication.\nWill be set once a user has been crated or linked for the new authentication.\nNull before that."),(0,a.kt)("p",null,"If this authentication is used to login, this is the user which should be logged in."),(0,a.kt)("h4",{id:"defined-in-7"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L56"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:56")),(0,a.kt)("h2",{id:"methods"},"Methods"),(0,a.kt)("h3",{id:"tojson"},"toJSON"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("strong",{parentName:"p"},"toJSON"),"(): ",(0,a.kt)("inlineCode",{parentName:"p"},"Object")),(0,a.kt)("h4",{id:"returns"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Object")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"expires")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"Date"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"id")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"string"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"state")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-docs/login-service-api/enums/model_postgres_UserLoginData_entity.LoginState"},(0,a.kt)("inlineCode",{parentName:"a"},"LoginState")))))),(0,a.kt)("h4",{id:"defined-in-8"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-login-service/blob/9da669b/backend/src/model/postgres/UserLoginData.entity.ts#L133"},"gropius-login-service/backend/src/model/postgres/UserLoginData.entity.ts:133")))}u.isMDXComponent=!0}}]);